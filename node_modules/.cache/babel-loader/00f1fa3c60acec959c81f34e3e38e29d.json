{"remainingRequest":"/Users/rj/Trainings/GoalSPA/spa_blog/node_modules/babel-loader/lib/index.js!/Users/rj/Trainings/GoalSPA/spa_blog/node_modules/eslint-loader/index.js??ref--13-0!/Users/rj/Trainings/GoalSPA/spa_blog/src/store/modules/auth.js","dependencies":[{"path":"/Users/rj/Trainings/GoalSPA/spa_blog/src/store/modules/auth.js","mtime":1598957732397},{"path":"/Users/rj/Trainings/GoalSPA/spa_blog/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/rj/Trainings/GoalSPA/spa_blog/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/rj/Trainings/GoalSPA/spa_blog/node_modules/eslint-loader/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuY29uY2F0IjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LnRvLXN0cmluZyI7CmltcG9ydCBheGlvcyBmcm9tICdheGlvcyc7CnZhciBzdGF0ZSA9IHsKICBhdXRoS2V5OiBsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgnYXV0aGVudGljYXRlJykgfHwgbnVsbAp9Owp2YXIgZ2V0dGVycyA9IHsKICBpc0xvZ2luZWQ6IGZ1bmN0aW9uIGlzTG9naW5lZCgpIHsKICAgIHJldHVybiBzdGF0ZS5hdXRoS2V5ICE9PSBudWxsOwogIH0KfTsKdmFyIGFjdGlvbnMgPSB7CiAgbG9naW5Vc2VyOiBmdW5jdGlvbiBsb2dpblVzZXIoX3JlZiwgcGF5bG9hZCkgewogICAgdmFyIGNvbW1pdCA9IF9yZWYuY29tbWl0OwogICAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlKSB7CiAgICAgIHZhciBkYXRhID0gSlNPTi5zdHJpbmdpZnkoewogICAgICAgIHF1ZXJ5OiAibXV0YXRpb24ge1xuICBhdXRoZW50aWNhdGUoXG4gICAgZW1haWw6IFwiIi5jb25jYXQocGF5bG9hZC5lbWFpbCwgIlwiLFxuICAgIHBhc3N3b3JkOiBcIiIpLmNvbmNhdChwYXlsb2FkLnBhc3N3b3JkLCAiXCJcbiAgKVxufSIpLAogICAgICAgIHZhcmlhYmxlczoge30KICAgICAgfSk7CiAgICAgIHZhciBjb25maWcgPSB7CiAgICAgICAgbWV0aG9kOiAncG9zdCcsCiAgICAgICAgdXJsOiAnaHR0cDovL2xvY2FsaG9zdDo0MDAwLycsCiAgICAgICAgaGVhZGVyczogewogICAgICAgICAgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJwogICAgICAgIH0sCiAgICAgICAgZGF0YTogZGF0YQogICAgICB9OwogICAgICBheGlvcyhjb25maWcpLnRoZW4oZnVuY3Rpb24gKHJlc3BvbnNlKSB7CiAgICAgICAgY29uc29sZS5sb2coSlNPTi5zdHJpbmdpZnkocmVzcG9uc2UuZGF0YSkpOwogICAgICAgIHZhciBrZXkgPSByZXNwb25zZS5kYXRhLmRhdGEuYXV0aGVudGljYXRlOwogICAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCdhdXRoZW50aWNhdGUnLCBrZXkpOwogICAgICAgIGNvbW1pdCgnc2V0QXV0aEtleScsIGtleSk7CiAgICAgICAgcmVzb2x2ZShyZXNwb25zZSk7CiAgICAgIH0pOwogICAgfSk7CiAgfSwKICBsb2dvdXRVc2VyOiBmdW5jdGlvbiBsb2dvdXRVc2VyKGNvbnRleHQpIHsKICAgIGlmIChjb250ZXh0LmdldHRlcnMuaXNMb2dpbmVkKSB7CiAgICAgIHZhciBjb25maWcgPSB7CiAgICAgICAgbWV0aG9kOiAncG9zdCcsCiAgICAgICAgdXJsOiAnaHR0cDovL2xvY2FsaG9zdDo0MDAwLycsCiAgICAgICAgaGVhZGVyczogewogICAgICAgICAgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJwogICAgICAgIH0KICAgICAgfTsKICAgICAgYXhpb3MoY29uZmlnKS50aGVuKGZ1bmN0aW9uIChyZXNwb25zZSkgewogICAgICAgIGxvY2FsU3RvcmFnZS5yZW1vdmVJdGVtKCdhdXRoZW50aWNhdGUnKTsKICAgICAgICBjb250ZXh0LmNvbW1pdCgnbG9nT3V0Jyk7CiAgICAgIH0pLmNhdGNoKGZ1bmN0aW9uIChlcnJvcikgewogICAgICAgIGxvY2FsU3RvcmFnZS5yZW1vdmVJdGVtKCdhdXRoZW50aWNhdGUnKTsKICAgICAgICBjb250ZXh0LmNvbW1pdCgnbG9nT3V0Jyk7CiAgICAgICAgY29uc29sZS5sb2coZXJyb3IpOwogICAgICB9KTsKICAgIH0KICB9LAogIHJlZ2lzdGVyVXNlcjogZnVuY3Rpb24gcmVnaXN0ZXJVc2VyKF9yZWYyLCBwYXlsb2FkKSB7CiAgICB2YXIgY29tbWl0ID0gX3JlZjIuY29tbWl0OwogICAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHsKICAgICAgdmFyIGRhdGEgPSBKU09OLnN0cmluZ2lmeSh7CiAgICAgICAgcXVlcnk6ICJtdXRhdGlvbiB7XG4gIHJlZ2lzdGVyKFxuICAgIGVtYWlsOiBcIiIuY29uY2F0KHBheWxvYWQuZW1haWwsICJcIixcbiAgICBwYXNzd29yZDogXCIiKS5jb25jYXQocGF5bG9hZC5wYXNzd29yZCwgIlwiXG4gIClcbn0iKSwKICAgICAgICB2YXJpYWJsZXM6IHt9CiAgICAgIH0pOwogICAgICB2YXIgY29uZmlnID0gewogICAgICAgIG1ldGhvZDogJ3Bvc3QnLAogICAgICAgIHVybDogJ2h0dHA6Ly9sb2NhbGhvc3Q6NDAwMC8nLAogICAgICAgIGhlYWRlcnM6IHsKICAgICAgICAgICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbicKICAgICAgICB9LAogICAgICAgIGRhdGE6IGRhdGEKICAgICAgfTsKICAgICAgYXhpb3MoY29uZmlnKS50aGVuKGZ1bmN0aW9uIChyZXNwb25zZSkgewogICAgICAgIGNvbnNvbGUubG9nKEpTT04uc3RyaW5naWZ5KHJlc3BvbnNlLmRhdGEpKTsKICAgICAgICByZXNvbHZlKHJlc3BvbnNlKTsKICAgICAgfSkuY2F0Y2goZnVuY3Rpb24gKGVycm9yKSB7CiAgICAgICAgY29uc29sZS5sb2coZXJyb3IpOwogICAgICAgIHJlamVjdChlcnJvcik7CiAgICAgIH0pOwogICAgfSk7CiAgfQp9Owp2YXIgbXV0YXRpb25zID0gewogIHNldEF1dGhLZXk6IGZ1bmN0aW9uIHNldEF1dGhLZXkoc3RhdGUsIGF1dGhLZXkpIHsKICAgIHJldHVybiBzdGF0ZS5hdXRoS2V5ID0gYXV0aEtleTsKICB9LAogIGxvZ091dDogZnVuY3Rpb24gbG9nT3V0KHN0YXRlKSB7CiAgICByZXR1cm4gc3RhdGUuYXV0aEtleSA9IG51bGw7CiAgfQp9OwpleHBvcnQgZGVmYXVsdCB7CiAgc3RhdGU6IHN0YXRlLAogIGdldHRlcnM6IGdldHRlcnMsCiAgYWN0aW9uczogYWN0aW9ucywKICBtdXRhdGlvbnM6IG11dGF0aW9ucwp9Ow=="},{"version":3,"sources":["/Users/rj/Trainings/GoalSPA/spa_blog/src/store/modules/auth.js"],"names":["axios","state","authKey","localStorage","getItem","getters","isLogined","actions","loginUser","payload","commit","Promise","resolve","data","JSON","stringify","query","email","password","variables","config","method","url","headers","then","response","console","log","key","authenticate","setItem","logoutUser","context","removeItem","catch","error","registerUser","reject","mutations","setAuthKey","logOut"],"mappings":"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","sourcesContent":["import axios from 'axios'\n\nconst state = {\n  authKey: localStorage.getItem('authenticate') || null\n}\n\nconst getters = {\n  isLogined: () => { return state.authKey !== null }\n}\n\nconst actions = {\n  loginUser ({ commit }, payload) {\n    return new Promise((resolve) => {\n      const data = JSON.stringify({\n        query: `mutation {\\n  authenticate(\\n    email: \"${payload.email}\",\\n    password: \"${payload.password}\"\\n  )\\n}`,\n        variables: {}\n      })\n      const config = {\n        method: 'post',\n        url: 'http://localhost:4000/',\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        data: data\n      }\n      axios(config)\n        .then(function (response) {\n          console.log(JSON.stringify(response.data))\n          const key = response.data.data.authenticate\n          localStorage.setItem('authenticate', key)\n          commit('setAuthKey', key)\n          resolve(response)\n        })\n    })\n  },\n  logoutUser (context) {\n    if (context.getters.isLogined) {\n      const config = {\n        method: 'post',\n        url: 'http://localhost:4000/',\n        headers: {\n          'Content-Type': 'application/json'\n        }\n      }\n      axios(config)\n        .then(function (response) {\n          localStorage.removeItem('authenticate')\n          context.commit('logOut')\n        })\n        .catch(function (error) {\n          localStorage.removeItem('authenticate')\n          context.commit('logOut')\n          console.log(error)\n        })\n    }\n  },\n  registerUser ({ commit }, payload) {\n    return new Promise((resolve, reject) => {\n      const data = JSON.stringify({\n        query: `mutation {\\n  register(\\n    email: \"${payload.email}\",\\n    password: \"${payload.password}\"\\n  )\\n}`,\n        variables: {}\n      })\n      const config = {\n        method: 'post',\n        url: 'http://localhost:4000/',\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        data: data\n      }\n      axios(config)\n        .then(function (response) {\n          console.log(JSON.stringify(response.data))\n          resolve(response)\n        })\n        .catch(function (error) {\n          console.log(error)\n          reject(error)\n        })\n    })\n  }\n}\n\nconst mutations = {\n  setAuthKey: (state, authKey) => (state.authKey = authKey),\n  logOut: (state) => (state.authKey = null)\n}\n\nexport default {\n  state,\n  getters,\n  actions,\n  mutations\n}\n"]}]}