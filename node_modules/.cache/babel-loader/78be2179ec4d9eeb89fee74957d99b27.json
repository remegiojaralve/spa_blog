{"remainingRequest":"/Users/rj/Trainings/Vue/spa_blog/node_modules/babel-loader/lib/index.js!/Users/rj/Trainings/Vue/spa_blog/node_modules/eslint-loader/index.js??ref--13-0!/Users/rj/Trainings/Vue/spa_blog/src/store/modules/auth.js","dependencies":[{"path":"/Users/rj/Trainings/Vue/spa_blog/src/store/modules/auth.js","mtime":1599469556484},{"path":"/Users/rj/Trainings/Vue/spa_blog/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/rj/Trainings/Vue/spa_blog/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/rj/Trainings/Vue/spa_blog/node_modules/eslint-loader/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuY29uY2F0IjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LnRvLXN0cmluZyI7CmltcG9ydCBheGlvcyBmcm9tICdheGlvcyc7CnZhciBzdGF0ZSA9IHsKICBhdXRoS2V5OiBsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgnYXV0aGVudGljYXRlJykgfHwgbnVsbAp9Owp2YXIgZ2V0dGVycyA9IHsKICBpc0xvZ2luZWQ6IGZ1bmN0aW9uIGlzTG9naW5lZCgpIHsKICAgIHJldHVybiBzdGF0ZS5hdXRoS2V5ICE9PSBudWxsOwogIH0KfTsKdmFyIGFjdGlvbnMgPSB7CiAgbG9naW5Vc2VyOiBmdW5jdGlvbiBsb2dpblVzZXIoX3JlZiwgcGF5bG9hZCkgewogICAgdmFyIGNvbW1pdCA9IF9yZWYuY29tbWl0OwogICAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlKSB7CiAgICAgIHZhciBkYXRhID0gSlNPTi5zdHJpbmdpZnkoewogICAgICAgIHF1ZXJ5OiAibXV0YXRpb24ge1xuICBhdXRoZW50aWNhdGUoXG4gICAgZW1haWw6IFwiIi5jb25jYXQocGF5bG9hZC5sb2dFbWFpbCwgIlwiLFxuICAgIHBhc3N3b3JkOiBcIiIpLmNvbmNhdChwYXlsb2FkLmxvZ1Bhc3N3b3JkLCAiXCJcbiAgKVxufSIpLAogICAgICAgIHZhcmlhYmxlczoge30KICAgICAgfSk7CiAgICAgIHZhciBjb25maWcgPSB7CiAgICAgICAgbWV0aG9kOiAncG9zdCcsCiAgICAgICAgdXJsOiAnaHR0cDovL2xvY2FsaG9zdDo0MDAwLycsCiAgICAgICAgaGVhZGVyczogewogICAgICAgICAgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJwogICAgICAgIH0sCiAgICAgICAgZGF0YTogZGF0YQogICAgICB9OwogICAgICBheGlvcyhjb25maWcpLnRoZW4oZnVuY3Rpb24gKHJlc3BvbnNlKSB7CiAgICAgICAgdmFyIGtleSA9IHJlc3BvbnNlLmRhdGEuZGF0YS5hdXRoZW50aWNhdGU7CgogICAgICAgIGlmIChrZXkubGVuZ3RoICE9PSAwKSB7CiAgICAgICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgnYXV0aGVudGljYXRlJywga2V5KTsKICAgICAgICAgIGNvbW1pdCgnc2V0QXV0aEtleScsIGtleSk7CiAgICAgICAgfQoKICAgICAgICByZXNvbHZlKGtleSk7CiAgICAgIH0pOwogICAgfSk7CiAgfSwKICBsb2dvdXRVc2VyOiBmdW5jdGlvbiBsb2dvdXRVc2VyKGNvbnRleHQpIHsKICAgIGlmIChjb250ZXh0LmdldHRlcnMuaXNMb2dpbmVkKSB7CiAgICAgIHZhciBjb25maWcgPSB7CiAgICAgICAgbWV0aG9kOiAncG9zdCcsCiAgICAgICAgdXJsOiAnaHR0cDovL2xvY2FsaG9zdDo0MDAwLycsCiAgICAgICAgaGVhZGVyczogewogICAgICAgICAgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJwogICAgICAgIH0KICAgICAgfTsKICAgICAgYXhpb3MoY29uZmlnKS50aGVuKGZ1bmN0aW9uIChyZXNwb25zZSkgewogICAgICAgIGxvY2FsU3RvcmFnZS5yZW1vdmVJdGVtKCdhdXRoZW50aWNhdGUnKTsKICAgICAgICBjb250ZXh0LmNvbW1pdCgnbG9nT3V0Jyk7CiAgICAgIH0pLmNhdGNoKGZ1bmN0aW9uIChlcnJvcikgewogICAgICAgIGxvY2FsU3RvcmFnZS5yZW1vdmVJdGVtKCdhdXRoZW50aWNhdGUnKTsKICAgICAgICBjb250ZXh0LmNvbW1pdCgnbG9nT3V0Jyk7CiAgICAgICAgY29uc29sZS5sb2coZXJyb3IpOwogICAgICB9KTsKICAgIH0KICB9LAogIHJlZ2lzdGVyVXNlcjogZnVuY3Rpb24gcmVnaXN0ZXJVc2VyKF9yZWYyLCBwYXlsb2FkKSB7CiAgICB2YXIgY29tbWl0ID0gX3JlZjIuY29tbWl0OwogICAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHsKICAgICAgdmFyIGRhdGEgPSBKU09OLnN0cmluZ2lmeSh7CiAgICAgICAgcXVlcnk6ICJtdXRhdGlvbiB7XG4gIHJlZ2lzdGVyKFxuICAgIGVtYWlsOiBcIiIuY29uY2F0KHBheWxvYWQucmVnRW1haWwsICJcIixcbiAgICBwYXNzd29yZDogXCIiKS5jb25jYXQocGF5bG9hZC5yZWdQYXNzd29yZCwgIlwiXG4gIClcbn0iKSwKICAgICAgICB2YXJpYWJsZXM6IHt9CiAgICAgIH0pOwogICAgICB2YXIgY29uZmlnID0gewogICAgICAgIG1ldGhvZDogJ3Bvc3QnLAogICAgICAgIHVybDogJ2h0dHA6Ly9sb2NhbGhvc3Q6NDAwMC8nLAogICAgICAgIGhlYWRlcnM6IHsKICAgICAgICAgICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbicKICAgICAgICB9LAogICAgICAgIGRhdGE6IGRhdGEKICAgICAgfTsKICAgICAgYXhpb3MoY29uZmlnKS50aGVuKGZ1bmN0aW9uIChyZXNwb25zZSkgewogICAgICAgIGNvbnNvbGUubG9nKHJlc3BvbnNlLmRhdGEuZGF0YSk7CiAgICAgICAgcmVzb2x2ZShyZXNwb25zZS5kYXRhLmRhdGEucmVnaXN0ZXIpOwogICAgICB9KS5jYXRjaChmdW5jdGlvbiAoZXJyb3IpIHsKICAgICAgICBjb25zb2xlLmxvZyhlcnJvcik7CiAgICAgICAgcmVqZWN0KGVycm9yKTsKICAgICAgfSk7CiAgICB9KTsKICB9Cn07CnZhciBtdXRhdGlvbnMgPSB7CiAgc2V0QXV0aEtleTogZnVuY3Rpb24gc2V0QXV0aEtleShzdGF0ZSwgYXV0aEtleSkgewogICAgcmV0dXJuIHN0YXRlLmF1dGhLZXkgPSBhdXRoS2V5OwogIH0sCiAgbG9nT3V0OiBmdW5jdGlvbiBsb2dPdXQoc3RhdGUpIHsKICAgIHJldHVybiBzdGF0ZS5hdXRoS2V5ID0gbnVsbDsKICB9Cn07CmV4cG9ydCBkZWZhdWx0IHsKICBzdGF0ZTogc3RhdGUsCiAgZ2V0dGVyczogZ2V0dGVycywKICBhY3Rpb25zOiBhY3Rpb25zLAogIG11dGF0aW9uczogbXV0YXRpb25zCn07"},{"version":3,"sources":["/Users/rj/Trainings/Vue/spa_blog/src/store/modules/auth.js"],"names":["axios","state","authKey","localStorage","getItem","getters","isLogined","actions","loginUser","payload","commit","Promise","resolve","data","JSON","stringify","query","logEmail","logPassword","variables","config","method","url","headers","then","response","key","authenticate","length","setItem","logoutUser","context","removeItem","catch","error","console","log","registerUser","reject","regEmail","regPassword","register","mutations","setAuthKey","logOut"],"mappings":"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","sourcesContent":["import axios from 'axios'\n\nconst state = {\n  authKey: localStorage.getItem('authenticate') || null\n}\n\nconst getters = {\n  isLogined: () => { return state.authKey !== null }\n}\n\nconst actions = {\n  loginUser ({ commit }, payload) {\n    return new Promise((resolve) => {\n      const data = JSON.stringify({\n        query: `mutation {\\n  authenticate(\\n    email: \"${payload.logEmail}\",\\n    password: \"${payload.logPassword}\"\\n  )\\n}`,\n        variables: {}\n      })\n      const config = {\n        method: 'post',\n        url: 'http://localhost:4000/',\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        data: data\n      }\n      axios(config)\n        .then(function (response) {\n          const key = response.data.data.authenticate\n          if (key.length !== 0) {\n            localStorage.setItem('authenticate', key)\n            commit('setAuthKey', key)\n          }\n          resolve(key)\n        })\n    })\n  },\n  logoutUser (context) {\n    if (context.getters.isLogined) {\n      const config = {\n        method: 'post',\n        url: 'http://localhost:4000/',\n        headers: {\n          'Content-Type': 'application/json'\n        }\n      }\n      axios(config)\n        .then(function (response) {\n          localStorage.removeItem('authenticate')\n          context.commit('logOut')\n        })\n        .catch(function (error) {\n          localStorage.removeItem('authenticate')\n          context.commit('logOut')\n          console.log(error)\n        })\n    }\n  },\n  registerUser ({ commit }, payload) {\n    return new Promise((resolve, reject) => {\n      const data = JSON.stringify({\n        query: `mutation {\\n  register(\\n    email: \"${payload.regEmail}\",\\n    password: \"${payload.regPassword}\"\\n  )\\n}`,\n        variables: {}\n      })\n      const config = {\n        method: 'post',\n        url: 'http://localhost:4000/',\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        data: data\n      }\n      axios(config)\n        .then(function (response) {\n          console.log(response.data.data)\n          resolve(response.data.data.register)\n        })\n        .catch(function (error) {\n          console.log(error)\n          reject(error)\n        })\n    })\n  }\n}\n\nconst mutations = {\n  setAuthKey: (state, authKey) => (state.authKey = authKey),\n  logOut: (state) => (state.authKey = null)\n}\n\nexport default {\n  state,\n  getters,\n  actions,\n  mutations\n}\n"]}]}